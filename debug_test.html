<!DOCTYPE html>
<html>
<head>
    <title>Debug Test - Pump Detector</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #0f0;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #0f0;
        }
        .error { color: #f00; }
        .success { color: #0f0; }
        .data {
            background: #000;
            padding: 10px;
            overflow-x: auto;
            white-space: pre;
        }
    </style>
</head>
<body>
    <h1>Debug Test - Pump Detector API</h1>

    <div id="results"></div>

    <script>
        const API_URL = '/api/v1';
        const API_KEY = 'c94525f138d5be1c2bc70ca407895cef8ae2baf5d3db3fc2b01097e5f1fc9615';

        async function testEndpoint(name, endpoint) {
            const section = document.createElement('div');
            section.className = 'test-section';

            try {
                console.log(`Testing ${endpoint}...`);

                const response = await fetch(`${API_URL}${endpoint}`, {
                    headers: {
                        'X-API-Key': API_KEY
                    }
                });

                const data = await response.json();

                section.innerHTML = `
                    <h3 class="success">✓ ${name}</h3>
                    <p>Status: ${response.status}</p>
                    <p>Data received: ${JSON.stringify(data).length} bytes</p>
                    <div class="data">${JSON.stringify(data, null, 2)}</div>
                `;

                // Check specific data fields
                if (endpoint === '/signals/active' && data.signals) {
                    section.innerHTML += `<p class="success">Active signals: ${data.signals.length}</p>`;
                }
                if (endpoint === '/status' && data.statistics) {
                    section.innerHTML += `<p class="success">Statistics found: ${JSON.stringify(data.statistics)}</p>`;
                }

            } catch (error) {
                section.innerHTML = `
                    <h3 class="error">✗ ${name}</h3>
                    <p class="error">Error: ${error.message}</p>
                `;
            }

            document.getElementById('results').appendChild(section);
        }

        async function runTests() {
            // Test all endpoints
            await testEndpoint('Status', '/status');
            await testEndpoint('Active Signals', '/signals/active');
            await testEndpoint('Signal History', '/signals/history?limit=5');
            await testEndpoint('Statistics', '/statistics');
            await testEndpoint('Analytics', '/analytics/performance?days=7');
            await testEndpoint('Config', '/config');
        }

        // Run tests when page loads
        window.onload = runTests;
    </script>
</body>
</html>